<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุชุณุฌูู ุงูุฏุฎูู - ูุตูุน ุงูุณุฏ ููุตูุงุนุฉ</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="login-page">

<div class="login-container">
  <div class="login-box">
    <div class="logo">
      <div class="logo-icon">
        <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
          <path d="M30 5L50 15V35L30 45L10 35V15L30 5Z" stroke="#00d4aa" stroke-width="2.5"/>
          <path d="M30 15L40 20V30L30 35L20 30V20L30 15Z" fill="#00d4aa"/>
        </svg>
      </div>
      <h1>ูุตูุน ุงูุณุฏ ููุตูุงุนุฉ</h1>
      <p>ูุธุงู ุฅุฏุงุฑุฉ ุงูุฅูุชุงุฌ ูุงูุจูููุช</p>
    </div>

    <div id="alert" class="alert" style="display:none;"></div>

    <form id="loginForm" onsubmit="handleLogin(event)">
      <div class="input-group">
        <label for="username">ุงุณู ุงููุณุชุฎุฏู</label>
        <input 
          type="text" 
          id="username" 
          name="username" 
          placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู"
          required
          autocomplete="username"
        >
      </div>

      <div class="input-group">
        <label for="password">ูููุฉ ุงููุฑูุฑ</label>
        <div class="password-input">
          <input 
            type="password" 
            id="password" 
            name="password" 
            placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ"
            required
            autocomplete="current-password"
          >
          <button type="button" class="toggle-password" onclick="togglePassword()">
            <span id="eyeIcon">๐๏ธ</span>
          </button>
        </div>
      </div>

      <button type="submit" class="btn-login">
        <span>ุชุณุฌูู ุงูุฏุฎูู</span>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M10 17l5-5-5-5v10z"/>
        </svg>
      </button>
    </form>

    <div class="demo-users">
      <p class="demo-title">ุงูุญุณุงุจุงุช ุงููุชุงุญุฉ:</p>
      <div class="demo-grid">
        <div class="demo-card" onclick="fillLogin('admin', 'admin123')">
          <span class="role-badge admin">ุงููุฏูุฑ</span>
          <p class="username">admin</p>
        </div>
        <div class="demo-card" onclick="fillLogin('scale_supervisor', '123456')">
          <span class="role-badge scale">ูุดุฑู ุงูููุฒุงู</span>
          <p class="username">scale_supervisor</p>
        </div>
        <div class="demo-card" onclick="fillLogin('billet_supervisor', '123456')">
          <span class="role-badge billet">ูุดุฑู ุงูุจูููุช</span>
          <p class="username">billet_supervisor</p>
        </div>
        <div class="demo-card" onclick="fillLogin('general_supervisor', '123456')">
          <span class="role-badge general">ุงููุดุฑู ุงูุนุงู</span>
          <p class="username">general_supervisor</p>
        </div>
        <div class="demo-card" onclick="fillLogin('sales', '123456')">
          <span class="role-badge sales">ููุฏูุจ ุงููุจูุนุงุช</span>
          <p class="username">sales</p>
        </div>
        <div class="demo-card" onclick="fillLogin('lab', '123456')">
          <span class="role-badge lab">ุงููุนูู</span>
          <p class="username">lab</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="js/auth.js"></script>
<script>
// ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
if (isLoggedIn()) {
  window.location.href = 'index.html';
}

// ูุนุงูุฌุฉ ุชุณุฌูู ุงูุฏุฎูู
function handleLogin(event) {
  event.preventDefault();
  
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value;
  
  if (!username || !password) {
    showAlert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ', 'error');
    return false;
  }
  
  const result = login(username, password);
  
  if (result.success) {
    showAlert('ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!', 'success');
    setTimeout(() => {
      window.location.href = 'index.html';
    }, 500);
  } else {
    showAlert(result.message, 'error');
  }
  
  return false;
}

// ุนุฑุถ ุฑุณุงูุฉ
function showAlert(message, type) {
  const alert = document.getElementById('alert');
  alert.textContent = message;
  alert.className = `alert ${type}`;
  alert.style.display = 'block';
  
  setTimeout(() => {
    alert.style.display = 'none';
  }, 5000);
}

// ุชุจุฏูู ุฅุธูุงุฑ ูููุฉ ุงููุฑูุฑ
function togglePassword() {
  const input = document.getElementById('password');
  const icon = document.getElementById('eyeIcon');
  
  if (input.type === 'password') {
    input.type = 'text';
    icon.textContent = '๐';
  } else {
    input.type = 'password';
    icon.textContent = '๐๏ธ';
  }
}

// ููุก ุจูุงูุงุช ุชุฌุฑูุจูุฉ
function fillLogin(username, password) {
  document.getElementById('username').value = username;
  document.getElementById('password').value = password;
}

// ุงูุชุฑููุฒ ุนูู ุญูู ุงุณู ุงููุณุชุฎุฏู
document.getElementById('username').focus();
</script>

</body>
</html>
